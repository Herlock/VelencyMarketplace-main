{% load static %} 
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Home</title>
    <meta charset="UTF-8" />
    <link
      rel="shortcut icon"
      href="{% static 'media/logo.png' %}"
      type="image/png"
    />
    <link rel="stylesheet" href="{% static 'css/main2.css'%}" />
    <link rel="stylesheet" href="{% static 'css/main_dropdown.css'%}" />
    <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"
    rel="stylesheet"
  />
    
  </head>
  <body class="body">

    <nav class="navbar">

      <div class="container">
    
        <a href="#Home" class="navbar-brand">
          <img src="{% static 'media/telentvers.png'%}" alt="">
        </a>
    
        <div class="navbar-wrap">
          <ul class="navbar-menu">
            <li>
              <a href="#about" class="link">О нас
                <div style="width: 45px; height: 8px; background: #2CE8C2; box-shadow: 0px 0px 21px rgba(44, 232, 194, 0.35); border-radius: 0px 0px 5px 5px;"></div>
              </a>
            </li>
            
            <li>
              <a href="#projects" class="link">Проекты
                <div style="width: 77px; height: 8px; background: #2CE8C2; box-shadow: 0px 0px 21px rgba(44, 232, 194, 0.35); border-radius: 0px 0px 5px 5px;"></div>
              </a>
            </li>
            <li>
              <a href="#team" class="link">Команда
                <div style="width: 75px; height: 8px; background: #2CE8C2; box-shadow: 0px 0px 21px rgba(44, 232, 194, 0.35); border-radius: 0px 0px 5px 5px;"></div>
              </a>
            </li>
            <li>
              <a href="#partners" class="link">Партнеры
                <div style="width: 83px; height: 8px; background: #2CE8C2; box-shadow: 0px 0px 21px rgba(44, 232, 194, 0.35); border-radius: 0px 0px 5px 5px;"></div>
              </a>
            </li>
            <li>
              <a href="#contacts" class="link">Контакты
                <div style="width: 83px; height: 8px; background: #2CE8C2; box-shadow: 0px 0px 21px rgba(44, 232, 194, 0.35); border-radius: 0px 0px 5px 5px;"></div>
              </a>
            </li>
            {% if user.is_authenticated %}
            <li>
              <div class="dropdown">
                <div class="dropdown-toggle" id="userDropdown" role="button" aria-haspopup="true" aria-expanded="false">
                  <a href="#">
                    Eth address: ...{{ user.username|slice:"-3:" }}
                  </a>
                </div>
                <div class="dropdown-menu" aria-labelledby="userDropdown" id="userDropdownMenu">
                  <a class="dropdown-item" href="/my_profile">Мой профиль</a>
                  <a class="dropdown-item" id='logoutButton'><b>Выйти</b></a>
                </div>
              </div>
            </li>
            {% else %}
            
              <button id="wallet" type="button" class="enter">
                <a>Connect</a>
              </button>
            
            {% endif %}
          </ul>
    
          <div class="burger">
            <img src="{% static 'media/burgerr.svg'%}" alt="">
          </div>
        </div>
    
      </div>
    
    </nav>
    
      

      <div class="first"  >
        
        <div class="left">
          <p class="title" id="Home">TALENTVERSE</p>
          <p class="title">СТАНЬ ЧАСТЬЮ МЕТАВСЕЛЕННОЙ</p>
          <p class="description">Познай, раскрой и монетизируй таланты с Академией!<br>Проявись как лидер нового времени внутри Метавселенной.<br>Оформляй витрину товаров на торговой площадке "Valency Store"<br>Экологичное сообщество – экологичный мир!</p>
          
        </div>
        
        <div class="right">
          <img class="logo" src="{% static 'media/logo1.png'%}" alt="" style="position: absolute;">
        </div>

      </div>

      <div class="line"></div>

      <div class="second" id="possibilities">

      <p class="title_min">Возможности на старте проекта</p>
      <p class="descr_min">Создавай внутреннюю экономику и становись партнёром проекта.</p>

        <div class="cards">

          <div class="possibility" >
            <div class="pos">
              <div  class="circle" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                <div class="possibil" style="position: absolute;">
                  <img src="{% static 'media/Group.svg'%}" alt="" style=" ">
                  <p class="title_mini">Покупай</p>
                  <p class="title_mini">за TVT токен</p>
                </div>
              </div>
              <p class="descr_mini">+25900 учеников, которые прошли обучение и зарабатывают уже сейчас</p>
            </div>


          <div class="possibility" >
            <div class="pos">
              <div  class="circle" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                <div class="possibil" style="position: absolute;">
                  <img src="{% static 'media/43.svg'%}" alt="" style=" ">
                  <p class="title_mini">Реализуй товары и услуги</p>
                  <p class="title_mini">на маркетплейсе</p>
                </div>
              </div>
              <p class="descr_mini">+25900 учеников, которые прошли обучение и зарабатывают уже сейчас</p>
            </div>


          <div class="possibility" >
            <div class="pos">
              <div  class="circle" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                <div class="possibil" style="position: absolute;">
                  <img src="{% static 'media/Group3.svg'%}" alt="" style=" ">
                  <p class="title_mini">Инвестируй в токен</p>
                  <p class="title_mini">и принимай решения</p>
                  <p class="title_mini">по проектам</p>
                </div>
              </div>
              <p class="descr_mini">+25900 учеников, которые прошли обучение и зарабатывают уже сейчас</p>
            </div>
          </div>
        </div>
      </div>

      <div class="line"></div>


      <div class="third" id="about">
        
        <div class="left">
          <p class="title">О НАС</p>
          <p class="description">TALENTVERS – это децентрализованная коммерческая "Метавселенная", которая помогает найти и развить таланты пользователей, а также зарабатывать на них, создавая свою экосистему. В том числе это возможность для оффлайн - организаций перейти в онлайн.</p>
          <button class="know_button"><a href="about">Узнать больше</a></button>
        </div>
        
        <div class="right nonee">
          <img class="tree" src="{% static 'media/tree.png'%}" alt="" >
        </div>

      </div>


      <div class="line"></div>


      <div class="third" id="token">
        
        <div class="lleft nonee">
          <img class="pack" src="{% static 'media/pack.png'%}" alt="">
        </div>

        <div class="rright">
          <p class="title-right">Стань участником "Бирюзовой" академии</p>
          <p class="description-right">Раскрой в себе свои навыки, таланты и мастерство с нашей академией. Если ты не знаешь, с чего начать свой путь, боишься сделать первый шаг или просто испытываешь духовное, материальное выгорание, то тебе к нам. Становись учеником нашей академии и раскрывайся в команде экспертов и своих единомышленнив. Создавай себя и свои проекты!</p>
            <div > <button class="token_button"><a href="#">Купить сейчас</a></button></div>
            
        </div>

      </div>



{% comment %} 

      <div class="image_wrapper" id="about" >
        <div class="slider">
          <div class="slider-nav">
            <div class="slider-items">
              <div class="item">
                <img src="{% static 'media/wrap.png'%}" alt="">
              </div>
              <div class="item">
                <img src="{% static 'media/wrap.png'%}" alt="">
              </div>
              <div class="item">
                <img src="{% static 'media/wrap.png'%}" alt="">
              </div>
              <div class="item">
                <img src="{% static 'media/wrap.png'%}" alt="">
              </div>
              <div class="item">
                <img src="{% static 'media/wrap.png'%}" alt="">
              </div>
            </div>
          </div>
        </div>
      </div> {% endcomment %}


      <div class="second_team" id="team">

        <p class="title_min" >Наша команда</p>
  
          <div class="cards">
            {% for member in team_members %}
            <div class="team_name" >
              <div class="pos">
                <div  class="circle_photo"> <img src="{% static 'media/circle.png'%}" alt="">
                </div>
                <div class="possibil_team" >
                   <img src="{{ member.image.url }}" alt="" style="  border-radius: 12px; cursor: pointer;">
                   <p class="title_mini">{{ member.first_name }}</p>
                   <p class="title_mini">{{ member.last_name }}</p>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
  
        <div class="fifth" style="padding-top: 40px;" id="projects">
          <p class="title_min" style="text-align: center;">Наши проекты</p>
          <div class="forscroll" style="display: flex; align-items: center; justify-content: center">
          
              <div class="our_projects">
                  
                  <div class="packages_slider">
                    <img src="{% static 'media/main1.svg'%}">
                    <div>
                      <p class="title_mini">VALENCY STORE</p>
                      <p class="describe_main">Какой то текст от Никиты про маркетплейс </p>
                    </div>  
                    <button class="know_button"><a href="#">Узнать больше</a></button>
                  </div>


                  <div class="packages_slider">
                    <img src="{% static 'media/main3.svg'%}">
                    <div>
                      <p class="title_mini">Издательский центр</p>
                      <p class="describe_main">Какой то текст от Никиты про ищдательский центр</p>
                    </div>  
                    <button class="know_button"><a href="#">Узнать больше</a></button>
                  </div>


                  <div class="packages_slider">
                    <img src="{% static 'media/main2.svg'%}">
                    <div>
                      <p class="title_mini">"Бирюзовая" Академия </p>
                      <p class="describe_main">Какой то текст от Никиты про академию</p>
                    </div>  
                    <button class="know_button"><a href="#">Узнать больше</a></button>
                  </div>


        
  
                  
                 
                  
              </div>
  
             
          </div>
      
          </div>

        </div>

       

        <div class="second" id="partners">

          <p class="title_min">Партнеры</p>

          <div class="cards">
  
            <div class="team_name">
              <div class="pos">
                <div  class="circle_photo" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                  <div class="possibil_team" >
                    <img src="{% static 'media/soz.jpeg'%}" alt="" style=" border-radius: 12px; cursor: pointer;">
                    <p class="title_mini">Благотворительный фоннд</p>
                    <p class="title_mini">"Созидание"</p>
                  </div>
                </div>
              </div>
  
  
              <div class="team_name">
                <div class="pos">
                  <div  class="circle_photo" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                    <div class="possibil_team" >
                      <img src="{% static 'media/kid.jpeg'%}" alt="" style="border-radius: 12px; cursor: pointer;">
                      <p class="title_mini">Детское образовательное комьюнити</p>
                      <p class="title_mini">"Kid to kid"</p>
                    </div>
                  </div>
                </div>
  
  
                <div class="team_name">
                  <div class="pos">
                    <div  class="circle_photo" style="position: relative;"> <img src="{% static 'media/circle.png'%}" alt=""></div>
                      <div class="possibil_team" >
                        <img src="{% static 'media/Me.jpeg'%}" alt="" style=" border-radius: 12px; cursor: pointer;">
                        <p class="title_mini">Yurii</p>
                        <p class="title_mini">Starikh</p>
                      </div>
                    </div>
                  </div>
          </div>
        </div>

        <div class="forms" id="contacts" >
        
          <div class="left">
            <p class="title">Свяжитесь с нами</p>
            <p class="description">Отправте нам свой вопрос и мы обязательно дадим ответ на него.</p>
            <div class="two_forms">
              <input type="text" placeholder="Name">
              <input type="text" placeholder="Email">
            </div>
            <div class="two_forms">
              <input type="text" placeholder="Phone">
              <input type="text" placeholder="Subject">
            </div>
            <div style="display: flex; flex-direction: column;">
              <textarea name="" id=""  placeholder="Message"></textarea>
              <button class="enter" style="margin: 0; margin-top: 30px;"><a href="#">Отправить</a></button>
            </div>

          </div>

          
          <div class="right_map">
            <img class="tree" src="{% static 'media/map.png'%}" alt="">
          </div>

  
        </div>



        <div class="line"></div>


        <div class="contacts">

          <div class="footer_first">
            <a href="#" class="brand"><img src="{% static 'media/telentvers.png'%}" alt=""></a>
            <p class="description-footer">TALENTVERS – это децентрализованная коммерческая "Метавселенная", которая помогает найти и развить таланты пользователей, а также зарабатывать на них, создавая свою экосистему. В том числе это возможность для оффлайн - организаций перейти в онлайн.</p>
            <div style="display: flex; flex-direction: row;">
              <img class="networks" src="{% static 'media/face.svg'%}">
              <img class="networks" src="{% static 'media/inst.svg'%}">
              <img class="networks" src="{% static 'media/face.svg'%}">
              <img class="networks" src="{% static 'media/inst.svg'%}">
            </div>
          </div>

          

          <div class="footer_third">
            <p class="title-footer">Информация</p>
            <a href="#" class="description-footer">Документация</a>
            <a href="#" class="description-footer">Политика конфиденциальности</a>
          </div>

          <div class="footer_forth">
            <p class="title-footer">Контакты</p>
            <p class="description-footer">Телефон: 
              +995 568 836 179</p>
            <p class="description-footer">Почта: hrworld48@gmail.com</p>
            <p class="description-footer">Адрес: Kobaladze 8a, Georgia, 6000, GE</p>
          </div>

          <div class="footer_fifth">
            <p class="title-footer">Помощь</p>
            <a href="#" class="description-footer">Связаться с нами</a>
            <a href="#" class="description-footer">FAQ</a>
          </div>

          
          

        </div>

        <script src="https://unpkg.com/js-cookie@3.0.1/dist/js.cookie.min.js"></script>

    
        <script type="module" >
          import {
            EthereumClient,
            w3mConnectors,
            w3mProvider,
            WagmiCore,
            WagmiCoreChains,
            WagmiCoreConnectors
          } from 'https://unpkg.com/@web3modal/ethereum'
        
          import { Web3Modal } from 'https://unpkg.com/@web3modal/html'
        
          // Equivalent to importing from @wagmi/core
          const { configureChains, createConfig, getAccount,disconnect   } = WagmiCore
        
          // Equivalent to importing from @wagmi/core/chains
          const { mainnet, polygon, avalanche, arbitrum,bsc } = WagmiCoreChains
        
          // Equivalent to importing from @wagmi/core/providers
          const { CoinbaseWalletConnector } = WagmiCoreConnectors
    
          window.process = {
            env: {
                NODE_ENV: 'development'
            }
        }    
    
          const chains = [arbitrum, mainnet, polygon,bsc]
          const projectId = '0b1e5c998294f163bf1af4d05e11e4c1'
    
          const { publicClient, connect } = configureChains(chains, [w3mProvider({ projectId })]);  
          const wagmiConfig = createConfig({
            autoConnect: true,
            connectors: w3mConnectors({ projectId, chains }),
            publicClient
          })
          const ethereumClient = new EthereumClient(wagmiConfig, chains)
          const web3modal = new Web3Modal({ projectId }, ethereumClient)
          {% if not user.is_authenticated %}
          document.getElementById("wallet").addEventListener("click", () => {
            web3modal.openModal();
        });
          




// Define the main function to handle wallet connection and authentication/registration
async function handleWalletConnect() {
  try {
    console.log("Wallet button clicked. Connecting to the wallet...");
    const account = await getAccount();
    console.log("Account information:", account);

    const csrfToken = Cookies.get("csrftoken");

    // Проверяем, подключен ли аккаунт
    if (account.isConnected) {
      console.log("Account is connected.");
      const address = account.address;
      const additionalInfo = "Дополнительная информация";

      // Создаем объект с данными
      const data = { address, additionalInfo };

      // Создаем объект опций для запроса
      const options = {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-CSRFToken": csrfToken, // Передаем токен CSRF в заголовке
        },
        body: JSON.stringify(data),
      };

      // Отправляем запрос на сервер Django
      const response = await fetch("/authenticate_wallet/", options);
      const json = await response.json();

      if (json.success) {
        console.log("Authentication or registration success!");
        window.location.href = "/profile"; // Перенаправляем на нужную страницу после успешного входа
      } else {
        console.error("Ошибка авторизации или регистрации:", json.error);
      }
    } else {
      console.log("Account is not connected. Waiting for the connection to complete...");
      setTimeout(handleWalletConnect, 1000); // Retry after 1 second
    }
  } catch (error) {
    console.error("Ошибка авторизации через WalletConnect:", error);
  }
}



// Call the main function to handle wallet connection and authentication/registration
document.getElementById("wallet").addEventListener("click", handleWalletConnect);
        





          web3modal.ethereumProvider.on("accountsChanged", (accounts) => {
            if (accounts.length > 0) {
              // User is authenticated, redirect or update the page here
              window.location.href = "/profile"; // Перенаправляем на нужную страницу после успешного входа
            } else {
              // User is disconnected, perform necessary actions if needed
            }
          });
            {% else %}
            const logoutButton = document.getElementById('logoutButton');
    
            // Add a click event listener to the logoutButton
            logoutButton.addEventListener('click', handleLogout);
            
           // Define the logout handler function
            async function handleLogout() {
              try {
                // Disconnect from the wallet connection
                await disconnect();
                // Redirect to the /logout page or any other desired action
                window.location.href = '/logout';
              } catch (error) {
                console.error("Error disconnecting:", error);
              }
            }
            {% endif %}
        </script>
        
        <script src="{% static 'js/main2.js'%}" defer></script>

  </body>
</html>
